{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:base",
    ":assignee(viceice)",
    ":automergeDigest",
    "docker:enableMajor",
    ":masterIssue"
  ],
  "stabilityDays": 3,
  "prCreation": "not-pending",
  "semanticCommits": true,
  "separateMinorPatch": true,
  "timezone": "Europe/Berlin",
  "labels": ["deps"],
  "major": {
    "masterIssueApproval": true
  },
  "minor": {
    "masterIssueApproval": true
  },
  "pinDigests": true,
  "digest": {
    "extends": ["schedule:daily"]
  },
  "lockFileMaintenance": {
    "enabled": true,
    "schedule": ["at any time"],
    "stabilityDays": 0,
    "masterIssueApproval": true
  },
  "postUpdateOptions": ["yarnDedupeHighest"],
  "ignorePaths": ["**/node_modules/**"],
  "packageRules": [
    {
      "packageNames": ["renovate", "renovate/renovate"],
      "extends": [":automergeMinor"],
      "minor": {
        "masterIssueApproval": false
      }
    },
    {
      "packageNames": ["node", "yarn", "pnpm", "rancher/cli"],
      "packagePatterns": ["^verdaccio"],
      "extends": [":automergePatch"],
      "minor": {
        "masterIssueApproval": false
      }
    },
    {
      "packagePatterns": ["mcr.microsoft.com/dotnet/core"],
      "groupName": "dotnet core images"
    },
    {
      "packagePatterns": ["^verdaccio"],
      "groupName": "verdaccio packages"
    },
    {
      "managers": ["regex"],
      "pinDigests": false
    }
  ],
  "regexManagers": [
    {
      "fileMatch": ["(^|/|\\.)Dockerfile$", "(^|/)Dockerfile\\.[^/]*$"],
      "matchStrings": [
        "# renovate: datasource=(?<datasource>.*?) depName=(?<depName>.*?)( versioning=(?<versioning>.*?))?\\sENV .*?_VERSION=(?<currentValue>.*)\\s"
      ],
      "versioningTemplate": "{{#if versioning}}{{versioning}}{{else}}semver{{/if}}"
    }
  ]
}
