{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:base",
    ":assignee(viceice)",
    ":automergeDigest",
    "docker:enableMajor",
    ":masterIssue"
  ],
  "stabilityDays": 3,
  "prCreation": "not-pending",
  "semanticCommits": true,
  "separateMinorPatch": true,
  "timezone": "Europe/Berlin",
  "labels": ["deps"],
  "major": {
    "masterIssueApproval": true
  },
  "minor": {
    "masterIssueApproval": true
  },
  "lockFileMaintenance": {
    "enabled": true,
    "schedule": ["at any time"],
    "stabilityDays": 0,
    "masterIssueApproval": true
  },
  "postUpdateOptions": ["yarnDedupeHighest"],
  "packageRules": [
    {
      "packageNames": ["rancher/cli"],
      "allowedVersions": "<2.0"
    },
    {
      "packageNames": ["renovate", "renovate/renovate"],
      "extends": [":automergeMinor"],
      "minor": {
        "masterIssueApproval": false
      }
    },
    {
      "packagePatterns": ["mcr.microsoft.com/dotnet/core"],
      "groupName": "dotnet core images"
    },
    {
      "packagePatterns": ["^verdaccio"],
      "extends": [":automergePatch"],
      "minor": {
        "masterIssueApproval": false
      },
      "groupName": "verdaccio packages"
    }
  ],
  "digest": {
    "extends": ["schedule:daily"],
    "automerge": true
  },
  "pinDigests": true,
  "regexManagers": [
    {
      "fileMatch": ["^Dockerfile$"],
      "matchStrings": [
        "datasource=(?<datasource>.*?) depName=(?<depName>.*?)( versioning=(?<versioning>.*?))?\\sENV .*?_VERSION=(?<currentValue>.*)\\s"
      ],
      "versioningTemplate": "{{#if versioning}}{{versioning}}{{else}}semver{{/if}}"
    }
  ]
}
